# Flame

**Flame** — это простой аналог Tinder, разработанный на Go. 
В приложении пользователи могут отмечать других пользователей как понравившихся или 
непонравившихся, а также искать людей по заданным предпочтениям, 
включая пол, возраст, дистанцию и основной город проживания.

## Оглавление

- [Описание проекта](#описание-проекта)
- [Архитектура и технологии](#архитектура-и-технологии)
- [Ключевые возможности](#ключевые-возможности)
- [Установка и запуск](#установка-и-запуск)
- [Примеры использования API](#примеры-использования-api)
- [Планы развития](#планы-развития)
- [Лицензия](#лицензия)
- [Контакты](#контакты)

## Описание проекта

**Flame** — это сервис для знакомств, позволяющий пользователям:

- Регистрироваться, входить в систему, обновлять профиль и получать новые токены с использованием JWT.
- Заполнять и редактировать профиль, включая загрузку и удаление фотографий.
- Отмечать пользователей как понравившихся или непонравившихся.
- Искать ближайших пользователей по заданным предпочтениям (пол, возраст, дистанция, основной город проживания).
- Обновлять геолокацию (широта и долгота) для получения актуальных результатов поиска.

## Архитектура и технологии

Проект построен на **микросервисной архитектуре** с применением лучших практик, таких как Domain-Driven Design (DDD) и Clean Architecture.

### Используемые технологии

- **Язык программирования:** Go
- **База данных:** PostgreSQL
    - Используется библиотека [sqlx](https://github.com/jmoiron/sqlx) для работы с базой данных
    - *PostGIS* для хранения координат и расчёта расстояния
- **Кэш:** Redis — снижает нагрузку на базу данных и ускоряет выполнение запросов
- **Межсервисное взаимодействие:** gRPC
- **Хранение файлов:** Vk Cloud (на базе S3 от Amazon) для хранения фотографий
- **Контейнеризация:** Docker для микросервисов, баз данных и Redis

### Особенности архитектуры

- **Разделение баз данных:**
    - Одна база данных для данных о свайпах (с более высокой нагрузкой)
    - Другая база данных для аккаунтов пользователей
- **Отказоустойчивость:** Микросервисная архитектура способствует высокой отказоустойчивости.
- **Оптимизация работы с геоданными:** Использование PostGIS позволяет эффективно хранить координаты и вычислять расстояния между пользователями.

## Ключевые возможности

- **Пользовательский профиль:**
    - Регистрация и вход с использованием JWT.
    - Заполнение и обновление профиля.
    - Загрузка и удаление фотографий.
- **Функционал свайпов:**
    - Отметка пользователей как понравившихся или непонравившихся.
    - Разделение логики обработки свайпов для распределения нагрузки.
- **Поиск по предпочтениям:**
    - Фильтрация пользователей по полу, возрасту, дистанции и основному городу проживания.
    - Обновление текущей геолокации (широта и долгота) для получения актуальных результатов.
- **Межсервисное взаимодействие:**
    - Использование gRPC для коммуникации между микросервисами.
- **Кэширование:**
    - Применение Redis для хранения кэша, что снижает нагрузку на базы данных.

## Установка и запуск

### Предварительные требования

- Go (версия 1.23+)
- Docker и Docker Compose
- PostgreSQL
- Redis

### Шаги по установке (в разработке)

1. **Клонирование репозитория:**

   ```bash
   git clone https://github.com/yourusername/flame.git
   cd flame
   ```
2. **Настройка переменных окружения:**

   Создай файл `.env` в корне проекта и добавь необходимые переменные  
   для подключения к базам данных, Redis, Vk Cloud и настройки JWT.  
   Пример переменных может выглядеть следующим образом: 
   ```
   //в разработке
   ```
3. **Запуск Docker контейнеров:**

   Используй Docker Compose для поднятия всех необходимых сервисов (микросервисы, базы данных, Redis):
   ```
   //в разработке
   ```
4. **Запуск Docker контейнеров:**

   После поднятия контейнеров приложение будет доступно по указанным в настройках портам. Проверь логи контейнеров, чтобы убедиться, что все сервисы запущены корректно

## Планы развития

- **Тестирование:** В ближайшее время будут написаны unit, integration и end-to-end тесты.
- **CI/CD:** Планируется интеграция CI/CD пайплайнов для автоматизации сборок и тестирования.
- **Уведомления:** В разработке находится система уведомлений для Android и iOS.
- **Документация:** Полная интеграция Swagger/OpenAPI для детального описания API.
- **Оптимизация производительности:** Улучшение работы с базами данных, кешированием и нагрузочным балансированием.

## Безопасность

- **JWT-токены:** Используются для аутентификации и обеспечения безопасности пользовательских сессий.
- **Redis:** Применяется для хранения временных данных и кеширования сессий.
- **Разделение баз данных:** База данных аккаунтов и база данных свайпов разделены для оптимизации нагрузки.

## Технологический стек

- **Язык программирования:** Go
- **База данных:** PostgreSQL (PostGIS для работы с геоданными)
- **Кеширование:** Redis
- **Хранение файлов:** S3 (Vk Cloud)
- **Микросервисная архитектура:** gRPC для взаимодействия между сервисами
- **Контейнеризация:** Docker и Docker Compose
- **API-документация:** Swagger (планируется)

## Лицензия

На данный момент проект не имеет лицензии и не планируется принимать вклады от сообщества.

## Контакты

Если у вас возникли вопросы или предложения, свяжитесь со мной:

- **GitHub:** [vldstkn](https://github.com/vldstkn)
- **Email:** vldstkn.develop@gmail.com
